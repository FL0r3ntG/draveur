<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Draveur - Microblog</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Draveur</h1>
    <p>Petits billets, pensées du jour, réflexions au fil de l’eau.</p>
  </header>

  <main id="billets-list">
    <!-- Les billets seront chargés ici -->
  </main>

  <footer>
    <p>© 2025 Draveur</p>
  </footer>

  <script>
    const container = document.getElementById('billets-list');

    fetch('billets/list.json')
      .then(res => res.json())
      .then(billets => {
        billets.forEach(file => {
          fetch('billets/' + file)
            .then(res => res.text())
            .then(html => {
              const tempDiv = document.createElement('div');
              tempDiv.innerHTML = html;

              const title = tempDiv.querySelector('.title').textContent;
              const date = tempDiv.querySelector('.date').textContent;
              const intro = tempDiv.querySelector('.intro').textContent;

              const article = document.createElement('article');
              article.innerHTML = `
                <h2><a href="billet-template.html?file=${file}">${title}</a></h2>
                <p class="date">${date}</p>
                <p class="intro">${intro}</p>
              `;
              container.appendChild(article);
            })
            .catch(err => console.error('Erreur lors du chargement du billet:', file, err));
        });
      });
  </script>
</body>
</html>
